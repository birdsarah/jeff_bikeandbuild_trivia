{% extends "base.html" %}
{% load staticfiles %}
{% load guesses %}


{% block navbutton %}
<a href="{% url 'send' %}" class="btn btn-success" {% if count == 0 %}disabled="disabled"{% endif %}>Submit My Guesses {% if count > 0 %}({{ count }}){% endif %}</a>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <p>To make a long story short, Jeff Goodwin is about to bike across the country 
        this summer with an awesome organization called Bike & Build. 
        Bike & Build trips are dedicated to raising money and awareness 
        for afford able housing, a cause Jeff cares deeply about. 
        Jeff will be raising money as part of this process to support 
        affordable housing organizations around the US. 
        This trivia challenge is a way to contribute to 
        a great cause and have some fun in the process.</p>
        <h4>How it works:</h4> 
        <ul>
            <li>Read through the trivia questions below</li>
            <li>Enter your guesses and click save &#40;each guess requires a $10 donation&#41;</li>
            <li>Guess some more, it&rsquo;s a great cause afterall</li>
            <li>Submit your guesses and make the approapriate donation directly on Bike &amp; Build&rsquo;s website</li>
            <li>If your guess is the closest you&rsquo;ll be rewarded with a sweet thank you gift</li>
        </ul>    
    </div>
</div>


<form role="form" action="." method="post">{% csrf_token %}
{% for trivia in object_list %}
<span id="{{ trivia.id }}"></span>
<div class="trivia row">
    <div class="col-md-6 image-col">
        <div class="image">
            <img class="img-responsive" src="{{ MEDIA_URL }}{{ trivia.image }}" alt="Image for {{ trivia.title }}"></img>
            <h2 class="overimage">{{trivia.title}}</h2>
        </div>
    </div>
    <div class="col-md-6 text-col">
        <dl>
            <dt>Overview</dt><dd>{{trivia.overview}}</dd>
            <dt>Insider Knowledge</dt><dd>{{trivia.insider}}</dd>
            <dt>Details</dt><dd>{{trivia.details}}</dd>
            <dt>Prize</dt><dd>{{trivia.prize}}</dd>
        </dl>
        <p class="question">{{trivia.trivia}} ({{ trivia.unit }})</p>
        <div class="input-group pull-right">
            <input name="trivia-{{ trivia.id }}" value="{{ trivia|get_guess:request.session }}" type="number" class="form-control" pattern="[0-9]+([,\.][0-9]+)?" title="Please enter a number of {{ trivia.unit }}" placeholder="Enter a number of {{ trivia.unit }}.">
            <span class="input-group-btn">
                <button type="submit" class="btn btn-success">Save</button>
            </span>
        </div>
    </div>
</div>
{% endfor %}
</form>
{% endblock %}
